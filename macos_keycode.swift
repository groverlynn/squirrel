import AppKit
import Carbon

struct RimeModifier: OptionSet {
  let rawValue: CInt

  static let Shift = RimeModifier(rawValue: 1 << 0)
  static let Lock = RimeModifier(rawValue: 1 << 1)
  static let Control = RimeModifier(rawValue: 1 << 2)
  static let Alt = RimeModifier(rawValue: 1 << 3)
  /* ibus :) mask */
  static let Handled = RimeModifier(rawValue: 1 << 24)
  static let Ignored = RimeModifier(rawValue: 1 << 25)

  static let Super = RimeModifier(rawValue: 1 << 26)
  static let Hyper = RimeModifier(rawValue: 1 << 27)
  static let Meta = RimeModifier(rawValue: 1 << 28)

  static let Release = RimeModifier(rawValue: 1 << 30)
  static let ModifierMask = RimeModifier(rawValue: 0x5f001fff)

}

func get_rime_modifiers(_ modifiers: NSEvent.ModifierFlags) -> RimeModifier {
  var ret: RimeModifier = []

  if (modifiers.contains(.shift)) {
    ret.insert(.Shift)
  }
  if (modifiers.contains(.capsLock)) {
    ret.insert(.Lock)
  }
  if (modifiers.contains(.control)) {
    ret.insert(.Control)
  }
  if (modifiers.contains(.option)) {
    ret.insert(.Alt)
  }
  if (modifiers.contains(.command)) {
    ret.insert(.Super)
  }
  if (modifiers.contains(.function)) {
    ret.insert(.Hyper)
  }

  return ret
}

func get_rime_keycode(keycode: Int, keychar: Int, shift: Boolean, caps: Boolean) -> CInt {
  if let rime_keycode = keycode_mac_to_rime[keycode] {
    return rime_keycode
  }

  // NOTE: IBus/Rime use different keycodes for uppercase/lowercase letters.
  if (keychar >= Int(("a" as Character).asciiValue!) &&
      keychar <= Int(("z" as Character).asciiValue!) && (shift != caps)) {
    // lowercase -> Uppercase
    return CInt(keychar) + CInt(("A" as Character).asciiValue! - ("a" as Character).asciiValue!)
  }

  if (keychar >= 0x20 && keychar <= 0x7e) {
    return CInt(keychar)
  }

  if let rime_keychar = keychar_mac_to_rime[keychar] {
    return rime_keychar
  }

  return XK_VoidSymbol
}

func parse_macos_modifiers(_ modifier_name: String) -> NSEvent.ModifierFlags {
  switch(modifier_name) {
  case "Lock":
    return .capsLock
  case "Shift":
    return .shift
  case "Control":
    return .control
  case "Alt":
    return .option
  case "Super":
    return .command
  case "Hyper":
    return .function
  default:
    return []
  }
}

func parse_rime_modifiers(_ modifier_name: String) -> RimeModifier {
  switch(modifier_name) {
  case "Shift":
    return .Shift
  case "Lock":
    return .Lock
  case "Control":
    return .Control
  case "Alt":
    return .Alt
  case "Super":
    return .Super
  case "Hyper":
    return .Hyper
  default:
    return []
  }
}

func parse_rime_keycode(_ key_name: String) -> CInt {
  if let rime_keycode = rime_keyname_to_keycode[key_name] {
    return rime_keycode
  }
  // not found or `VoidSymbol`
  return 0xffffff
}

func parse_macos_keychar(_ key_name: String) -> UInt16 {
  if let rime_keycode = rime_keyname_to_keycode[key_name] {
    if (rime_keycode >= 0xff00 && rime_keycode <= 0xffff) {
      if let mac_keycode = keychar_rime_to_mac[rime_keycode] {
        return UInt16(mac_keycode)
      }
    } else if (rime_keycode < 0xff00) {
      return UInt16(rime_keycode)
    }
  }
  return 0
}


// pc keyboard
var kVK_PC_Application: Int = 0x6e
var kVK_PC_BS: Int = 0x33
var kVK_PC_Del: Int = 0x75
var kVK_PC_Insert: Int = 0x72
var kVK_PC_KeypadNumLock: Int = 0x47
var kVK_PC_Pause: Int = 0x71
var kVK_PC_Power: Int = 0x7f
var kVK_PC_PrintScreen: Int = 0x69
var kVK_PC_ScrollLock: Int = 0x6b

fileprivate let keycode_mac_to_rime: [Int: CInt] = [
  // modifiers
  kVK_CapsLock: XK_Caps_Lock,
  kVK_Command: XK_Super_L,  // XK_Meta_L?
  kVK_RightCommand: XK_Super_R,  // XK_Meta_R?
  kVK_Control: XK_Control_L,
  kVK_RightControl: XK_Control_R,
  kVK_Function: XK_Hyper_L,
  kVK_Option: XK_Alt_L,
  kVK_RightOption: XK_Alt_R,
  kVK_Shift: XK_Shift_L,
  kVK_RightShift: XK_Shift_R,
  // special,
  kVK_Delete: XK_BackSpace,
  // OSX_VK_ENTER_POWERBOOK -> ?,
  kVK_Escape:XK_Escape,
  kVK_ForwardDelete: XK_Delete,
// the same keycode as kVK_PC_INSERT,
  //kVK_Helpï¼š XK_Help,
  kVK_Return: XK_Return,
  kVK_Space: XK_space,
  kVK_Tab: XK_Tab,
    // function,
  kVK_F1: XK_F1,
  kVK_F2: XK_F2,
  kVK_F3: XK_F3,
  kVK_F4: XK_F4,
  kVK_F5: XK_F5,
  kVK_F6: XK_F6,
  kVK_F7: XK_F7,
  kVK_F8: XK_F8,
  kVK_F9: XK_F9,
  kVK_F10: XK_F10,
  kVK_F11: XK_F11,
  kVK_F12: XK_F12,
  kVK_F13: XK_F13,
  kVK_F14: XK_F14,
  kVK_F15: XK_F15,
  kVK_F16: XK_F16,
  kVK_F17: XK_F17,
  kVK_F18: XK_F18,
  kVK_F19: XK_F19,
  kVK_F20: XK_F20,
  // cursor,
  kVK_UpArrow: XK_Up,
  kVK_DownArrow: XK_Down,
  kVK_LeftArrow: XK_Left,
  kVK_RightArrow: XK_Right,
  kVK_PageUp: XK_Page_Up,
  kVK_PageDown: XK_Page_Down,
  kVK_Home: XK_Home,
  kVK_End: XK_End,
  // keypad,
  kVK_ANSI_Keypad0: XK_KP_0,
  kVK_ANSI_Keypad1: XK_KP_1,
  kVK_ANSI_Keypad2: XK_KP_2,
  kVK_ANSI_Keypad3: XK_KP_3,
  kVK_ANSI_Keypad4: XK_KP_4,
  kVK_ANSI_Keypad5: XK_KP_5,
  kVK_ANSI_Keypad6: XK_KP_6,
  kVK_ANSI_Keypad7: XK_KP_7,
  kVK_ANSI_Keypad8: XK_KP_8,
  kVK_ANSI_Keypad9: XK_KP_9,
  kVK_ANSI_KeypadEnter: XK_KP_Enter,
  kVK_ANSI_KeypadClear: XK_Clear,
  kVK_ANSI_KeypadDecimal: XK_KP_Decimal,
  kVK_ANSI_KeypadEquals: XK_KP_Equal,
  kVK_ANSI_KeypadMinus: XK_KP_Subtract,
  kVK_ANSI_KeypadMultiply: XK_KP_Multiply,
  kVK_ANSI_KeypadPlus: XK_KP_Add,
  kVK_ANSI_KeypadDivide: XK_KP_Divide,
  // pc keyboard,
  kVK_PC_Application: XK_Menu,
  kVK_PC_Insert: XK_Insert,
//the same keycode as kVK_ANSI_KeypadClear
//  kVK_PC_Keypad_NumLock: XK_Num_Lock,
//the same keycode as kVK_F15
//  kVK_PC_Pause: XK_Pause,
  //OSX_VK_PC_Power -> ?,
//the same keycode as kVK_F13
//  kVK_PC_PrintScreen: XK_Print,
//the same keycode as kVK_F14
//  kVK_PC_ScrollLock: XK_Scroll_Lock,
  // JIS keyboard,
  kVK_JIS_KeypadComma: XK_KP_Separator,
  kVK_JIS_Eisu: XK_Eisu_toggle,
  kVK_JIS_Kana: XK_Kana_Shift
]

fileprivate let keychar_mac_to_rime: [Int: CInt] = [
  // ASCII control characters
  NSEnterCharacter: XK_KP_Enter,
  NSBackspaceCharacter: XK_BackSpace,
  NSTabCharacter: XK_Tab,
  NSNewlineCharacter: XK_Linefeed,
  NSCarriageReturnCharacter: XK_Return,
  NSBackTabCharacter: XK_ISO_Left_Tab,
  NSDeleteCharacter: XK_Delete,
  // Nagivator key characters
  NSUpArrowFunctionKey: XK_Up,
  NSDownArrowFunctionKey: XK_Down,
  NSLeftArrowFunctionKey: XK_Left,
  NSRightArrowFunctionKey: XK_Right,
  // Function key characters
  NSF1FunctionKey: XK_F1,
  NSF2FunctionKey: XK_F2,
  NSF3FunctionKey: XK_F3,
  NSF4FunctionKey: XK_F4,
  NSF5FunctionKey: XK_F5,
  NSF6FunctionKey: XK_F6,
  NSF7FunctionKey: XK_F7,
  NSF8FunctionKey: XK_F8,
  NSF9FunctionKey: XK_F9,
  NSF10FunctionKey: XK_F10,
  NSF11FunctionKey: XK_F11,
  NSF12FunctionKey: XK_F12,
  NSF13FunctionKey: XK_F13,
  NSF14FunctionKey: XK_F14,
  NSF15FunctionKey: XK_F15,
  NSF16FunctionKey: XK_F16,
  NSF17FunctionKey: XK_F17,
  NSF18FunctionKey: XK_F18,
  NSF19FunctionKey: XK_F19,
  NSF20FunctionKey: XK_F20,
  NSF21FunctionKey: XK_F21,
  NSF22FunctionKey: XK_F22,
  NSF23FunctionKey: XK_F23,
  NSF24FunctionKey: XK_F24,
  NSF25FunctionKey: XK_F25,
  NSF26FunctionKey: XK_F26,
  NSF27FunctionKey: XK_F27,
  NSF28FunctionKey: XK_F28,
  NSF29FunctionKey: XK_F29,
  NSF30FunctionKey: XK_F30,
  NSF31FunctionKey: XK_F31,
  NSF32FunctionKey: XK_F32,
  NSF33FunctionKey: XK_F33,
  NSF34FunctionKey: XK_F34,
  NSF35FunctionKey: XK_F35,
  // Misc functional key characters
  NSInsertFunctionKey: XK_Insert,
  NSHomeFunctionKey: XK_Home,
  NSBeginFunctionKey: XK_Begin,
  NSEndFunctionKey: XK_End,
  NSPageUpFunctionKey: XK_Page_Up,
  NSPageDownFunctionKey: XK_Page_Down,
  NSScrollLockFunctionKey: XK_Scroll_Lock,
  NSPauseFunctionKey: XK_Pause,
  NSSysReqFunctionKey: XK_Sys_Req,
  NSBreakFunctionKey: XK_Break,
  NSStopFunctionKey: XK_Cancel,
  NSMenuFunctionKey: XK_Menu,
  NSPrintFunctionKey: XK_Print,
  NSClearLineFunctionKey: XK_Clear,
  NSClearDisplayFunctionKey: XK_Num_Lock,
  NSSelectFunctionKey: XK_Select,
  NSExecuteFunctionKey: XK_Execute,
  NSUndoFunctionKey: XK_Undo,
  NSRedoFunctionKey: XK_Redo,
  NSFindFunctionKey: XK_Find,
  NSHelpFunctionKey: XK_Help,
  NSModeSwitchFunctionKey: XK_Mode_switch
]

fileprivate let rime_keyname_to_keycode: [String: CInt] = [
  // ascii
  "space": 0x000020,
  "exclam": 0x000021,
  "quotedbl": 0x000022,
  "numbersign": 0x000023,
  "dollar": 0x000024,
  "percent": 0x000025,
  "ampersand": 0x000026,
  "apostrophe": 0x000027,
  "quoteright": 0x000027,
  "parenleft": 0x000028,
  "parenright": 0x000029,
  "asterisk": 0x00002a,
  "plus": 0x00002b,
  "comma": 0x00002c,
  "minus": 0x00002d,
  "period": 0x00002e,
  "slash": 0x00002f,
  "0": 0x000030,
  "1": 0x000031,
  "2": 0x000032,
  "3": 0x000033,
  "4": 0x000034,
  "5": 0x000035,
  "6": 0x000036,
  "7": 0x000037,
  "8": 0x000038,
  "9": 0x000039,
  "colon": 0x00003a,
  "semicolon": 0x00003b,
  "less": 0x00003c,
  "equal": 0x00003d,
  "greater": 0x00003e,
  "question": 0x00003f,
  "at": 0x000040,
  "A": 0x000041,
  "B": 0x000042,
  "C": 0x000043,
  "D": 0x000044,
  "E": 0x000045,
  "F": 0x000046,
  "G": 0x000047,
  "H": 0x000048,
  "I": 0x000049,
  "J": 0x00004a,
  "K": 0x00004b,
  "L": 0x00004c,
  "M": 0x00004d,
  "N": 0x00004e,
  "O": 0x00004f,
  "P": 0x000050,
  "Q": 0x000051,
  "R": 0x000052,
  "S": 0x000053,
  "T": 0x000054,
  "U": 0x000055,
  "V": 0x000056,
  "W": 0x000057,
  "X": 0x000058,
  "Y": 0x000059,
  "Z": 0x00005a,
  "bracketleft": 0x00005b,
  "backslash": 0x00005c,
  "bracketright": 0x00005d,
  "asciicircum": 0x00005e,
  "underscore": 0x00005f,
  "grave": 0x000060,
  "quoteleft": 0x000060,
  "a": 0x000061,
  "b": 0x000062,
  "c": 0x000063,
  "d": 0x000064,
  "e": 0x000065,
  "f": 0x000066,
  "g": 0x000067,
  "h": 0x000068,
  "i": 0x000069,
  "j": 0x00006a,
  "k": 0x00006b,
  "l": 0x00006c,
  "m": 0x00006d,
  "n": 0x00006e,
  "o": 0x00006f,
  "p": 0x000070,
  "q": 0x000071,
  "r": 0x000072,
  "s": 0x000073,
  "t": 0x000074,
  "u": 0x000075,
  "v": 0x000076,
  "w": 0x000077,
  "x": 0x000078,
  "y": 0x000079,
  "z": 0x00007a,
  "braceleft": 0x00007b,
  "bar": 0x00007c,
  "braceright": 0x00007d,
  "asciitilde": 0x00007e,
  // latin-1
  "nobreakspace": 0x0000a0,
  "exclamdown": 0x0000a1,
  "cent": 0x0000a2,
  "sterling": 0x0000a3,
  "currency": 0x0000a4,
  "yen": 0x0000a5,
  "brokenbar": 0x0000a6,
  "section": 0x0000a7,
  "diaeresis": 0x0000a8,
  "copyright": 0x0000a9,
  "ordfeminine": 0x0000aa,
  "guillemotleft": 0x0000ab,
  "notsign": 0x0000ac,
  "hyphen": 0x0000ad,
  "registered": 0x0000ae,
  "macron": 0x0000af,
  "degree": 0x0000b0,
  "plusminus": 0x0000b1,
  "twosuperior": 0x0000b2,
  "threesuperior": 0x0000b3,
  "acute": 0x0000b4,
  "mu": 0x0000b5,
  "paragraph": 0x0000b6,
  "periodcentered": 0x0000b7,
  "cedilla": 0x0000b8,
  "onesuperior": 0x0000b9,
  "masculine": 0x0000ba,
  "guillemotright": 0x0000bb,
  "onequarter": 0x0000bc,
  "onehalf": 0x0000bd,
  "threequarters": 0x0000be,
  "questiondown": 0x0000bf,
  "Agrave": 0x0000c0,
  "Aacute": 0x0000c1,
  "Acircumflex": 0x0000c2,
  "Atilde": 0x0000c3,
  "Adiaeresis": 0x0000c4,
  "Aring": 0x0000c5,
  "AE": 0x0000c6,
  "Ccedilla": 0x0000c7,
  "Egrave": 0x0000c8,
  "Eacute": 0x0000c9,
  "Ecircumflex": 0x0000ca,
  "Ediaeresis": 0x0000cb,
  "Igrave": 0x0000cc,
  "Iacute": 0x0000cd,
  "Icircumflex": 0x0000ce,
  "Idiaeresis": 0x0000cf,
  "ETH": 0x0000d0,
  "Eth": 0x0000d0,
  "Ntilde": 0x0000d1,
  "Ograve": 0x0000d2,
  "Oacute": 0x0000d3,
  "Ocircumflex": 0x0000d4,
  "Otilde": 0x0000d5,
  "Odiaeresis": 0x0000d6,
  "multiply": 0x0000d7,
  "Ooblique": 0x0000d8,
  "Ugrave": 0x0000d9,
  "Uacute": 0x0000da,
  "Ucircumflex": 0x0000db,
  "Udiaeresis": 0x0000dc,
  "Yacute": 0x0000dd,
  "THORN": 0x0000de,
  "Thorn": 0x0000de,
  "ssharp": 0x0000df,
  "agrave": 0x0000e0,
  "aacute": 0x0000e1,
  "acircumflex": 0x0000e2,
  "atilde": 0x0000e3,
  "adiaeresis": 0x0000e4,
  "aring": 0x0000e5,
  "ae": 0x0000e6,
  "ccedilla": 0x0000e7,
  "egrave": 0x0000e8,
  "eacute": 0x0000e9,
  "ecircumflex": 0x0000ea,
  "ediaeresis": 0x0000eb,
  "igrave": 0x0000ec,
  "iacute": 0x0000ed,
  "icircumflex": 0x0000ee,
  "idiaeresis": 0x0000ef,
  "eth": 0x0000f0,
  "ntilde": 0x0000f1,
  "ograve": 0x0000f2,
  "oacute": 0x0000f3,
  "ocircumflex": 0x0000f4,
  "otilde": 0x0000f5,
  "odiaeresis": 0x0000f6,
  "division": 0x0000f7,
  "oslash": 0x0000f8,
  "ugrave": 0x0000f9,
  "uacute": 0x0000fa,
  "ucircumflex": 0x0000fb,
  "udiaeresis": 0x0000fc,
  "yacute": 0x0000fd,
  "thorn": 0x0000fe,
  "ydiaeresis": 0x0000ff,
  "Aogonek": 0x0001a1,
  "breve": 0x0001a2,
  "Lstroke": 0x0001a3,
  "Lcaron": 0x0001a5,
  "Sacute": 0x0001a6,
  "Scaron": 0x0001a9,
  "Scedilla": 0x0001aa,
  "Tcaron": 0x0001ab,
  "Zacute": 0x0001ac,
  "Zcaron": 0x0001ae,
  "Zabovedot": 0x0001af,
  "aogonek": 0x0001b1,
  "ogonek": 0x0001b2,
  "lstroke": 0x0001b3,
  "lcaron": 0x0001b5,
  "sacute": 0x0001b6,
  "caron": 0x0001b7,
  "scaron": 0x0001b9,
  "scedilla": 0x0001ba,
  "tcaron": 0x0001bb,
  "zacute": 0x0001bc,
  "doubleacute": 0x0001bd,
  "zcaron": 0x0001be,
  "zabovedot": 0x0001bf,
  "Racute": 0x0001c0,
  "Abreve": 0x0001c3,
  "Lacute": 0x0001c5,
  "Cacute": 0x0001c6,
  "Ccaron": 0x0001c8,
  "Eogonek": 0x0001ca,
  "Ecaron": 0x0001cc,
  "Dcaron": 0x0001cf,
  "Dstroke": 0x0001d0,
  "Nacute": 0x0001d1,
  "Ncaron": 0x0001d2,
  "Odoubleacute": 0x0001d5,
  "Rcaron": 0x0001d8,
  "Uring": 0x0001d9,
  "Udoubleacute": 0x0001db,
  "Tcedilla": 0x0001de,
  "racute": 0x0001e0,
  "abreve": 0x0001e3,
  "lacute": 0x0001e5,
  "cacute": 0x0001e6,
  "ccaron": 0x0001e8,
  "eogonek": 0x0001ea,
  "ecaron": 0x0001ec,
  "dcaron": 0x0001ef,
  "dstroke": 0x0001f0,
  "nacute": 0x0001f1,
  "ncaron": 0x0001f2,
  "odoubleacute": 0x0001f5,
  "rcaron": 0x0001f8,
  "uring": 0x0001f9,
  "udoubleacute": 0x0001fb,
  "tcedilla": 0x0001fe,
  "abovedot": 0x0001ff,
  "Hstroke": 0x0002a1,
  "Hcircumflex": 0x0002a6,
  "Iabovedot": 0x0002a9,
  "Gbreve": 0x0002ab,
  "Jcircumflex": 0x0002ac,
  "hstroke": 0x0002b1,
  "hcircumflex": 0x0002b6,
  "idotless": 0x0002b9,
  "gbreve": 0x0002bb,
  "jcircumflex": 0x0002bc,
  "Cabovedot": 0x0002c5,
  "Ccircumflex": 0x0002c6,
  "Gabovedot": 0x0002d5,
  "Gcircumflex": 0x0002d8,
  "Ubreve": 0x0002dd,
  "Scircumflex": 0x0002de,
  "cabovedot": 0x0002e5,
  "ccircumflex": 0x0002e6,
  "gabovedot": 0x0002f5,
  "gcircumflex": 0x0002f8,
  "ubreve": 0x0002fd,
  "scircumflex": 0x0002fe,
  "kappa": 0x0003a2,
  "kra": 0x0003a2,
  "Rcedilla": 0x0003a3,
  "Itilde": 0x0003a5,
  "Lcedilla": 0x0003a6,
  "Emacron": 0x0003aa,
  "Gcedilla": 0x0003ab,
  "Tslash": 0x0003ac,
  "rcedilla": 0x0003b3,
  "itilde": 0x0003b5,
  "lcedilla": 0x0003b6,
  "emacron": 0x0003ba,
  "gcedilla": 0x0003bb,
  "tslash": 0x0003bc,
  "ENG": 0x0003bd,
  "eng": 0x0003bf,
  "Amacron": 0x0003c0,
  "Iogonek": 0x0003c7,
  "Eabovedot": 0x0003cc,
  "Imacron": 0x0003cf,
  "Ncedilla": 0x0003d1,
  "Omacron": 0x0003d2,
  "Kcedilla": 0x0003d3,
  "Uogonek": 0x0003d9,
  "Utilde": 0x0003dd,
  "Umacron": 0x0003de,
  "amacron": 0x0003e0,
  "iogonek": 0x0003e7,
  "eabovedot": 0x0003ec,
  "imacron": 0x0003ef,
  "ncedilla": 0x0003f1,
  "omacron": 0x0003f2,
  "kcedilla": 0x0003f3,
  "uogonek": 0x0003f9,
  "utilde": 0x0003fd,
  "umacron": 0x0003fe,
  "overline": 0x00047e,
  "kana_fullstop": 0x0004a1,
  "kana_openingbracket": 0x0004a2,
  "kana_closingbracket": 0x0004a3,
  "kana_comma": 0x0004a4,
  "kana_conjunctive": 0x0004a5,
  "kana_middledot": 0x0004a5,
  "kana_WO": 0x0004a6,
  "kana_a": 0x0004a7,
  "kana_i": 0x0004a8,
  "kana_u": 0x0004a9,
  "kana_e": 0x0004aa,
  "kana_o": 0x0004ab,
  "kana_ya": 0x0004ac,
  "kana_yu": 0x0004ad,
  "kana_yo": 0x0004ae,
  "kana_tsu": 0x0004af,
  "kana_tu": 0x0004af,
  "prolongedsound": 0x0004b0,
  "kana_A": 0x0004b1,
  "kana_I": 0x0004b2,
  "kana_U": 0x0004b3,
  "kana_E": 0x0004b4,
  "kana_O": 0x0004b5,
  "kana_KA": 0x0004b6,
  "kana_KI": 0x0004b7,
  "kana_KU": 0x0004b8,
  "kana_KE": 0x0004b9,
  "kana_KO": 0x0004ba,
  "kana_SA": 0x0004bb,
  "kana_SHI": 0x0004bc,
  "kana_SU": 0x0004bd,
  "kana_SE": 0x0004be,
  "kana_SO": 0x0004bf,
  "kana_TA": 0x0004c0,
  "kana_CHI": 0x0004c1,
  "kana_TI": 0x0004c1,
  "kana_TSU": 0x0004c2,
  "kana_TU": 0x0004c2,
  "kana_TE": 0x0004c3,
  "kana_TO": 0x0004c4,
  "kana_NA": 0x0004c5,
  "kana_NI": 0x0004c6,
  "kana_NU": 0x0004c7,
  "kana_NE": 0x0004c8,
  "kana_NO": 0x0004c9,
  "kana_HA": 0x0004ca,
  "kana_HI": 0x0004cb,
  "kana_FU": 0x0004cc,
  "kana_HU": 0x0004cc,
  "kana_HE": 0x0004cd,
  "kana_HO": 0x0004ce,
  "kana_MA": 0x0004cf,
  "kana_MI": 0x0004d0,
  "kana_MU": 0x0004d1,
  "kana_ME": 0x0004d2,
  "kana_MO": 0x0004d3,
  "kana_YA": 0x0004d4,
  "kana_YU": 0x0004d5,
  "kana_YO": 0x0004d6,
  "kana_RA": 0x0004d7,
  "kana_RI": 0x0004d8,
  "kana_RU": 0x0004d9,
  "kana_RE": 0x0004da,
  "kana_RO": 0x0004db,
  "kana_WA": 0x0004dc,
  "kana_N": 0x0004dd,
  "voicedsound": 0x0004de,
  "semivoicedsound": 0x0004df,
  "Arabic_comma": 0x0005ac,
  "Arabic_semicolon": 0x0005bb,
  "Arabic_question_mark": 0x0005bf,
  "Arabic_hamza": 0x0005c1,
  "Arabic_maddaonalef": 0x0005c2,
  "Arabic_hamzaonalef": 0x0005c3,
  "Arabic_hamzaonwaw": 0x0005c4,
  "Arabic_hamzaunderalef": 0x0005c5,
  "Arabic_hamzaonyeh": 0x0005c6,
  "Arabic_alef": 0x0005c7,
  "Arabic_beh": 0x0005c8,
  "Arabic_tehmarbuta": 0x0005c9,
  "Arabic_teh": 0x0005ca,
  "Arabic_theh": 0x0005cb,
  "Arabic_jeem": 0x0005cc,
  "Arabic_hah": 0x0005cd,
  "Arabic_khah": 0x0005ce,
  "Arabic_dal": 0x0005cf,
  "Arabic_thal": 0x0005d0,
  "Arabic_ra": 0x0005d1,
  "Arabic_zain": 0x0005d2,
  "Arabic_seen": 0x0005d3,
  "Arabic_sheen": 0x0005d4,
  "Arabic_sad": 0x0005d5,
  "Arabic_dad": 0x0005d6,
  "Arabic_tah": 0x0005d7,
  "Arabic_zah": 0x0005d8,
  "Arabic_ain": 0x0005d9,
  "Arabic_ghain": 0x0005da,
  "Arabic_tatweel": 0x0005e0,
  "Arabic_feh": 0x0005e1,
  "Arabic_qaf": 0x0005e2,
  "Arabic_kaf": 0x0005e3,
  "Arabic_lam": 0x0005e4,
  "Arabic_meem": 0x0005e5,
  "Arabic_noon": 0x0005e6,
  "Arabic_ha": 0x0005e7,
  "Arabic_heh": 0x0005e7,
  "Arabic_waw": 0x0005e8,
  "Arabic_alefmaksura": 0x0005e9,
  "Arabic_yeh": 0x0005ea,
  "Arabic_fathatan": 0x0005eb,
  "Arabic_dammatan": 0x0005ec,
  "Arabic_kasratan": 0x0005ed,
  "Arabic_fatha": 0x0005ee,
  "Arabic_damma": 0x0005ef,
  "Arabic_kasra": 0x0005f0,
  "Arabic_shadda": 0x0005f1,
  "Arabic_sukun": 0x0005f2,
  "Serbian_dje": 0x0006a1,
  "Macedonia_gje": 0x0006a2,
  "Cyrillic_io": 0x0006a3,
  "Ukrainian_ie": 0x0006a4,
  "Ukranian_je": 0x0006a4,
  "Macedonia_dse": 0x0006a5,
  "Ukrainian_i": 0x0006a6,
  "Ukranian_i": 0x0006a6,
  "Ukrainian_yi": 0x0006a7,
  "Ukranian_yi": 0x0006a7,
  "Cyrillic_je": 0x0006a8,
  "Serbian_je": 0x0006a8,
  "Cyrillic_lje": 0x0006a9,
  "Serbian_lje": 0x0006a9,
  "Cyrillic_nje": 0x0006aa,
  "Serbian_nje": 0x0006aa,
  "Serbian_tshe": 0x0006ab,
  "Macedonia_kje": 0x0006ac,
  "Byelorussian_shortu": 0x0006ae,
  "Cyrillic_dzhe": 0x0006af,
  "Serbian_dze": 0x0006af,
  "numerosign": 0x0006b0,
  "Serbian_DJE": 0x0006b1,
  "Macedonia_GJE": 0x0006b2,
  "Cyrillic_IO": 0x0006b3,
  "Ukrainian_IE": 0x0006b4,
  "Ukranian_JE": 0x0006b4,
  "Macedonia_DSE": 0x0006b5,
  "Ukrainian_I": 0x0006b6,
  "Ukranian_I": 0x0006b6,
  "Ukrainian_YI": 0x0006b7,
  "Ukranian_YI": 0x0006b7,
  "Cyrillic_JE": 0x0006b8,
  "Serbian_JE": 0x0006b8,
  "Cyrillic_LJE": 0x0006b9,
  "Serbian_LJE": 0x0006b9,
  "Cyrillic_NJE": 0x0006ba,
  "Serbian_NJE": 0x0006ba,
  "Serbian_TSHE": 0x0006bb,
  "Macedonia_KJE": 0x0006bc,
  "Byelorussian_SHORTU": 0x0006be,
  "Cyrillic_DZHE": 0x0006bf,
  "Serbian_DZE": 0x0006bf,
  "Cyrillic_yu": 0x0006c0,
  "Cyrillic_a": 0x0006c1,
  "Cyrillic_be": 0x0006c2,
  "Cyrillic_tse": 0x0006c3,
  "Cyrillic_de": 0x0006c4,
  "Cyrillic_ie": 0x0006c5,
  "Cyrillic_ef": 0x0006c6,
  "Cyrillic_ghe": 0x0006c7,
  "Cyrillic_ha": 0x0006c8,
  "Cyrillic_i": 0x0006c9,
  "Cyrillic_shorti": 0x0006ca,
  "Cyrillic_ka": 0x0006cb,
  "Cyrillic_el": 0x0006cc,
  "Cyrillic_em": 0x0006cd,
  "Cyrillic_en": 0x0006ce,
  "Cyrillic_o": 0x0006cf,
  "Cyrillic_pe": 0x0006d0,
  "Cyrillic_ya": 0x0006d1,
  "Cyrillic_er": 0x0006d2,
  "Cyrillic_es": 0x0006d3,
  "Cyrillic_te": 0x0006d4,
  "Cyrillic_u": 0x0006d5,
  "Cyrillic_zhe": 0x0006d6,
  "Cyrillic_ve": 0x0006d7,
  "Cyrillic_softsign": 0x0006d8,
  "Cyrillic_yeru": 0x0006d9,
  "Cyrillic_ze": 0x0006da,
  "Cyrillic_sha": 0x0006db,
  "Cyrillic_e": 0x0006dc,
  "Cyrillic_shcha": 0x0006dd,
  "Cyrillic_che": 0x0006de,
  "Cyrillic_hardsign": 0x0006df,
  "Cyrillic_YU": 0x0006e0,
  "Cyrillic_A": 0x0006e1,
  "Cyrillic_BE": 0x0006e2,
  "Cyrillic_TSE": 0x0006e3,
  "Cyrillic_DE": 0x0006e4,
  "Cyrillic_IE": 0x0006e5,
  "Cyrillic_EF": 0x0006e6,
  "Cyrillic_GHE": 0x0006e7,
  "Cyrillic_HA": 0x0006e8,
  "Cyrillic_I": 0x0006e9,
  "Cyrillic_SHORTI": 0x0006ea,
  "Cyrillic_KA": 0x0006eb,
  "Cyrillic_EL": 0x0006ec,
  "Cyrillic_EM": 0x0006ed,
  "Cyrillic_EN": 0x0006ee,
  "Cyrillic_O": 0x0006ef,
  "Cyrillic_PE": 0x0006f0,
  "Cyrillic_YA": 0x0006f1,
  "Cyrillic_ER": 0x0006f2,
  "Cyrillic_ES": 0x0006f3,
  "Cyrillic_TE": 0x0006f4,
  "Cyrillic_U": 0x0006f5,
  "Cyrillic_ZHE": 0x0006f6,
  "Cyrillic_VE": 0x0006f7,
  "Cyrillic_SOFTSIGN": 0x0006f8,
  "Cyrillic_YERU": 0x0006f9,
  "Cyrillic_ZE": 0x0006fa,
  "Cyrillic_SHA": 0x0006fb,
  "Cyrillic_E": 0x0006fc,
  "Cyrillic_SHCHA": 0x0006fd,
  "Cyrillic_CHE": 0x0006fe,
  "Cyrillic_HARDSIGN": 0x0006ff,
  "Greek_ALPHAaccent": 0x0007a1,
  "Greek_EPSILONaccent": 0x0007a2,
  "Greek_ETAaccent": 0x0007a3,
  "Greek_IOTAaccent": 0x0007a4,
  "Greek_IOTAdieresis": 0x0007a5,
  "Greek_IOTAdiaeresis": 0x0007a5,
  "Greek_OMICRONaccent": 0x0007a7,
  "Greek_UPSILONaccent": 0x0007a8,
  "Greek_UPSILONdieresis": 0x0007a9,
  "Greek_OMEGAaccent": 0x0007ab,
  "Greek_accentdieresis": 0x0007ae,
  "Greek_horizbar": 0x0007af,
  "Greek_alphaaccent": 0x0007b1,
  "Greek_epsilonaccent": 0x0007b2,
  "Greek_etaaccent": 0x0007b3,
  "Greek_iotaaccent": 0x0007b4,
  "Greek_iotadieresis": 0x0007b5,
  "Greek_iotaaccentdieresis": 0x0007b6,
  "Greek_omicronaccent": 0x0007b7,
  "Greek_upsilonaccent": 0x0007b8,
  "Greek_upsilondieresis": 0x0007b9,
  "Greek_upsilonaccentdieresis": 0x0007ba,
  "Greek_omegaaccent": 0x0007bb,
  "Greek_ALPHA": 0x0007c1,
  "Greek_BETA": 0x0007c2,
  "Greek_GAMMA": 0x0007c3,
  "Greek_DELTA": 0x0007c4,
  "Greek_EPSILON": 0x0007c5,
  "Greek_ZETA": 0x0007c6,
  "Greek_ETA": 0x0007c7,
  "Greek_THETA": 0x0007c8,
  "Greek_IOTA": 0x0007c9,
  "Greek_KAPPA": 0x0007ca,
  "Greek_LAMBDA": 0x0007cb,
  "Greek_LAMDA": 0x0007cb,
  "Greek_MU": 0x0007cc,
  "Greek_NU": 0x0007cd,
  "Greek_XI": 0x0007ce,
  "Greek_OMICRON": 0x0007cf,
  "Greek_PI": 0x0007d0,
  "Greek_RHO": 0x0007d1,
  "Greek_SIGMA": 0x0007d2,
  "Greek_TAU": 0x0007d4,
  "Greek_UPSILON": 0x0007d5,
  "Greek_PHI": 0x0007d6,
  "Greek_CHI": 0x0007d7,
  "Greek_PSI": 0x0007d8,
  "Greek_OMEGA": 0x0007d9,
  "Greek_alpha": 0x0007e1,
  "Greek_beta": 0x0007e2,
  "Greek_gamma": 0x0007e3,
  "Greek_delta": 0x0007e4,
  "Greek_epsilon": 0x0007e5,
  "Greek_zeta": 0x0007e6,
  "Greek_eta": 0x0007e7,
  "Greek_theta": 0x0007e8,
  "Greek_iota": 0x0007e9,
  "Greek_kappa": 0x0007ea,
  "Greek_lambda": 0x0007eb,
  "Greek_lamda": 0x0007eb,
  "Greek_mu": 0x0007ec,
  "Greek_nu": 0x0007ed,
  "Greek_xi": 0x0007ee,
  "Greek_omicron": 0x0007ef,
  "Greek_pi": 0x0007f0,
  "Greek_rho": 0x0007f1,
  "Greek_sigma": 0x0007f2,
  "Greek_finalsmallsigma": 0x0007f3,
  "Greek_tau": 0x0007f4,
  "Greek_upsilon": 0x0007f5,
  "Greek_phi": 0x0007f6,
  "Greek_chi": 0x0007f7,
  "Greek_psi": 0x0007f8,
  "Greek_omega": 0x0007f9,
  "leftradical": 0x0008a1,
  "topleftradical": 0x0008a2,
  "horizconnector": 0x0008a3,
  "topintegral": 0x0008a4,
  "botintegral": 0x0008a5,
  "vertconnector": 0x0008a6,
  "topleftsqbracket": 0x0008a7,
  "botleftsqbracket": 0x0008a8,
  "toprightsqbracket": 0x0008a9,
  "botrightsqbracket": 0x0008aa,
  "topleftparens": 0x0008ab,
  "botleftparens": 0x0008ac,
  "toprightparens": 0x0008ad,
  "botrightparens": 0x0008ae,
  "leftmiddlecurlybrace": 0x0008af,
  "rightmiddlecurlybrace": 0x0008b0,
  "topleftsummation": 0x0008b1,
  "botleftsummation": 0x0008b2,
  "topvertsummationconnector": 0x0008b3,
  "botvertsummationconnector": 0x0008b4,
  "toprightsummation": 0x0008b5,
  "botrightsummation": 0x0008b6,
  "rightmiddlesummation": 0x0008b7,
  "lessthanequal": 0x0008bc,
  "notequal": 0x0008bd,
  "greaterthanequal": 0x0008be,
  "integral": 0x0008bf,
  "therefore": 0x0008c0,
  "variation": 0x0008c1,
  "infinity": 0x0008c2,
  "nabla": 0x0008c5,
  "approximate": 0x0008c8,
  "similarequal": 0x0008c9,
  "ifonlyif": 0x0008cd,
  "implies": 0x0008ce,
  "identical": 0x0008cf,
  "radical": 0x0008d6,
  "includedin": 0x0008da,
  "includes": 0x0008db,
  "intersection": 0x0008dc,
  "union": 0x0008dd,
  "logicaland": 0x0008de,
  "logicalor": 0x0008df,
  "partialderivative": 0x0008ef,
  "function": 0x0008f6,
  "leftarrow": 0x0008fb,
  "uparrow": 0x0008fc,
  "rightarrow": 0x0008fd,
  "downarrow": 0x0008fe,
  "blank": 0x0009df,
  "soliddiamond": 0x0009e0,
  "checkerboard": 0x0009e1,
  "ht": 0x0009e2,
  "ff": 0x0009e3,
  "cr": 0x0009e4,
  "lf": 0x0009e5,
  "nl": 0x0009e8,
  "vt": 0x0009e9,
  "lowrightcorner": 0x0009ea,
  "uprightcorner": 0x0009eb,
  "upleftcorner": 0x0009ec,
  "lowleftcorner": 0x0009ed,
  "crossinglines": 0x0009ee,
  "horizlinescan1": 0x0009ef,
  "horizlinescan3": 0x0009f0,
  "horizlinescan5": 0x0009f1,
  "horizlinescan7": 0x0009f2,
  "horizlinescan9": 0x0009f3,
  "leftt": 0x0009f4,
  "rightt": 0x0009f5,
  "bott": 0x0009f6,
  "topt": 0x0009f7,
  "vertbar": 0x0009f8,
  "emspace": 0x000aa1,
  "enspace": 0x000aa2,
  "em3space": 0x000aa3,
  "em4space": 0x000aa4,
  "digitspace": 0x000aa5,
  "punctspace": 0x000aa6,
  "thinspace": 0x000aa7,
  "hairspace": 0x000aa8,
  "emdash": 0x000aa9,
  "endash": 0x000aaa,
  "signifblank": 0x000aac,
  "ellipsis": 0x000aae,
  "doubbaselinedot": 0x000aaf,
  "onethird": 0x000ab0,
  "twothirds": 0x000ab1,
  "onefifth": 0x000ab2,
  "twofifths": 0x000ab3,
  "threefifths": 0x000ab4,
  "fourfifths": 0x000ab5,
  "onesixth": 0x000ab6,
  "fivesixths": 0x000ab7,
  "careof": 0x000ab8,
  "figdash": 0x000abb,
  "leftanglebracket": 0x000abc,
  "decimalpoint": 0x000abd,
  "rightanglebracket": 0x000abe,
  "marker": 0x000abf,
  "oneeighth": 0x000ac3,
  "threeeighths": 0x000ac4,
  "fiveeighths": 0x000ac5,
  "seveneighths": 0x000ac6,
  "trademark": 0x000ac9,
  "signaturemark": 0x000aca,
  "trademarkincircle": 0x000acb,
  "leftopentriangle": 0x000acc,
  "rightopentriangle": 0x000acd,
  "emopencircle": 0x000ace,
  "emopenrectangle": 0x000acf,
  "leftsinglequotemark": 0x000ad0,
  "rightsinglequotemark": 0x000ad1,
  "leftdoublequotemark": 0x000ad2,
  "rightdoublequotemark": 0x000ad3,
  "prescription": 0x000ad4,
  "minutes": 0x000ad6,
  "seconds": 0x000ad7,
  "latincross": 0x000ad9,
  "hexagram": 0x000ada,
  "filledrectbullet": 0x000adb,
  "filledlefttribullet": 0x000adc,
  "filledrighttribullet": 0x000add,
  "emfilledcircle": 0x000ade,
  "emfilledrect": 0x000adf,
  "enopencircbullet": 0x000ae0,
  "enopensquarebullet": 0x000ae1,
  "openrectbullet": 0x000ae2,
  "opentribulletup": 0x000ae3,
  "opentribulletdown": 0x000ae4,
  "openstar": 0x000ae5,
  "enfilledcircbullet": 0x000ae6,
  "enfilledsqbullet": 0x000ae7,
  "filledtribulletup": 0x000ae8,
  "filledtribulletdown": 0x000ae9,
  "leftpointer": 0x000aea,
  "rightpointer": 0x000aeb,
  "club": 0x000aec,
  "diamond": 0x000aed,
  "heart": 0x000aee,
  "maltesecross": 0x000af0,
  "dagger": 0x000af1,
  "doubledagger": 0x000af2,
  "checkmark": 0x000af3,
  "ballotcross": 0x000af4,
  "musicalsharp": 0x000af5,
  "musicalflat": 0x000af6,
  "malesymbol": 0x000af7,
  "femalesymbol": 0x000af8,
  "telephone": 0x000af9,
  "telephonerecorder": 0x000afa,
  "phonographcopyright": 0x000afb,
  "caret": 0x000afc,
  "singlelowquotemark": 0x000afd,
  "doublelowquotemark": 0x000afe,
  "cursor": 0x000aff,
  "leftcaret": 0x000ba3,
  "rightcaret": 0x000ba6,
  "downcaret": 0x000ba8,
  "upcaret": 0x000ba9,
  "overbar": 0x000bc0,
  "downtack": 0x000bc2,
  "upshoe": 0x000bc3,
  "downstile": 0x000bc4,
  "underbar": 0x000bc6,
  "jot": 0x000bca,
  "quad": 0x000bcc,
  "uptack": 0x000bce,
  "circle": 0x000bcf,
  "upstile": 0x000bd3,
  "downshoe": 0x000bd6,
  "rightshoe": 0x000bd8,
  "leftshoe": 0x000bda,
  "lefttack": 0x000bdc,
  "righttack": 0x000bfc,
  "hebrew_doublelowline": 0x000cdf,
  "hebrew_aleph": 0x000ce0,
  "hebrew_bet": 0x000ce1,
  "hebrew_beth": 0x000ce1,
  "hebrew_gimel": 0x000ce2,
  "hebrew_gimmel": 0x000ce2,
  "hebrew_dalet": 0x000ce3,
  "hebrew_daleth": 0x000ce3,
  "hebrew_he": 0x000ce4,
  "hebrew_waw": 0x000ce5,
  "hebrew_zain": 0x000ce6,
  "hebrew_zayin": 0x000ce6,
  "hebrew_chet": 0x000ce7,
  "hebrew_het": 0x000ce7,
  "hebrew_tet": 0x000ce8,
  "hebrew_teth": 0x000ce8,
  "hebrew_yod": 0x000ce9,
  "hebrew_finalkaph": 0x000cea,
  "hebrew_kaph": 0x000ceb,
  "hebrew_lamed": 0x000cec,
  "hebrew_finalmem": 0x000ced,
  "hebrew_mem": 0x000cee,
  "hebrew_finalnun": 0x000cef,
  "hebrew_nun": 0x000cf0,
  "hebrew_samech": 0x000cf1,
  "hebrew_samekh": 0x000cf1,
  "hebrew_ayin": 0x000cf2,
  "hebrew_finalpe": 0x000cf3,
  "hebrew_pe": 0x000cf4,
  "hebrew_finalzade": 0x000cf5,
  "hebrew_finalzadi": 0x000cf5,
  "hebrew_zade": 0x000cf6,
  "hebrew_zadi": 0x000cf6,
  "hebrew_kuf": 0x000cf7,
  "hebrew_qoph": 0x000cf7,
  "hebrew_resh": 0x000cf8,
  "hebrew_shin": 0x000cf9,
  "hebrew_taf": 0x000cfa,
  "hebrew_taw": 0x000cfa,
  "Thai_kokai": 0x000da1,
  "Thai_khokhai": 0x000da2,
  "Thai_khokhuat": 0x000da3,
  "Thai_khokhwai": 0x000da4,
  "Thai_khokhon": 0x000da5,
  "Thai_khorakhang": 0x000da6,
  "Thai_ngongu": 0x000da7,
  "Thai_chochan": 0x000da8,
  "Thai_choching": 0x000da9,
  "Thai_chochang": 0x000daa,
  "Thai_soso": 0x000dab,
  "Thai_chochoe": 0x000dac,
  "Thai_yoying": 0x000dad,
  "Thai_dochada": 0x000dae,
  "Thai_topatak": 0x000daf,
  "Thai_thothan": 0x000db0,
  "Thai_thonangmontho": 0x000db1,
  "Thai_thophuthao": 0x000db2,
  "Thai_nonen": 0x000db3,
  "Thai_dodek": 0x000db4,
  "Thai_totao": 0x000db5,
  "Thai_thothung": 0x000db6,
  "Thai_thothahan": 0x000db7,
  "Thai_thothong": 0x000db8,
  "Thai_nonu": 0x000db9,
  "Thai_bobaimai": 0x000dba,
  "Thai_popla": 0x000dbb,
  "Thai_phophung": 0x000dbc,
  "Thai_fofa": 0x000dbd,
  "Thai_phophan": 0x000dbe,
  "Thai_fofan": 0x000dbf,
  "Thai_phosamphao": 0x000dc0,
  "Thai_moma": 0x000dc1,
  "Thai_yoyak": 0x000dc2,
  "Thai_rorua": 0x000dc3,
  "Thai_ru": 0x000dc4,
  "Thai_loling": 0x000dc5,
  "Thai_lu": 0x000dc6,
  "Thai_wowaen": 0x000dc7,
  "Thai_sosala": 0x000dc8,
  "Thai_sorusi": 0x000dc9,
  "Thai_sosua": 0x000dca,
  "Thai_hohip": 0x000dcb,
  "Thai_lochula": 0x000dcc,
  "Thai_oang": 0x000dcd,
  "Thai_honokhuk": 0x000dce,
  "Thai_paiyannoi": 0x000dcf,
  "Thai_saraa": 0x000dd0,
  "Thai_maihanakat": 0x000dd1,
  "Thai_saraaa": 0x000dd2,
  "Thai_saraam": 0x000dd3,
  "Thai_sarai": 0x000dd4,
  "Thai_saraii": 0x000dd5,
  "Thai_saraue": 0x000dd6,
  "Thai_sarauee": 0x000dd7,
  "Thai_sarau": 0x000dd8,
  "Thai_sarauu": 0x000dd9,
  "Thai_phinthu": 0x000dda,
  "Thai_maihanakat_maitho": 0x000dde,
  "Thai_baht": 0x000ddf,
  "Thai_sarae": 0x000de0,
  "Thai_saraae": 0x000de1,
  "Thai_sarao": 0x000de2,
  "Thai_saraaimaimuan": 0x000de3,
  "Thai_saraaimaimalai": 0x000de4,
  "Thai_lakkhangyao": 0x000de5,
  "Thai_maiyamok": 0x000de6,
  "Thai_maitaikhu": 0x000de7,
  "Thai_maiek": 0x000de8,
  "Thai_maitho": 0x000de9,
  "Thai_maitri": 0x000dea,
  "Thai_maichattawa": 0x000deb,
  "Thai_thanthakhat": 0x000dec,
  "Thai_nikhahit": 0x000ded,
  "Thai_leksun": 0x000df0,
  "Thai_leknung": 0x000df1,
  "Thai_leksong": 0x000df2,
  "Thai_leksam": 0x000df3,
  "Thai_leksi": 0x000df4,
  "Thai_lekha": 0x000df5,
  "Thai_lekhok": 0x000df6,
  "Thai_lekchet": 0x000df7,
  "Thai_lekpaet": 0x000df8,
  "Thai_lekkao": 0x000df9,
  "Hangul_Kiyeog": 0x000ea1,
  "Hangul_SsangKiyeog": 0x000ea2,
  "Hangul_KiyeogSios": 0x000ea3,
  "Hangul_Nieun": 0x000ea4,
  "Hangul_NieunJieuj": 0x000ea5,
  "Hangul_NieunHieuh": 0x000ea6,
  "Hangul_Dikeud": 0x000ea7,
  "Hangul_SsangDikeud": 0x000ea8,
  "Hangul_Rieul": 0x000ea9,
  "Hangul_RieulKiyeog": 0x000eaa,
  "Hangul_RieulMieum": 0x000eab,
  "Hangul_RieulPieub": 0x000eac,
  "Hangul_RieulSios": 0x000ead,
  "Hangul_RieulTieut": 0x000eae,
  "Hangul_RieulPhieuf": 0x000eaf,
  "Hangul_RieulHieuh": 0x000eb0,
  "Hangul_Mieum": 0x000eb1,
  "Hangul_Pieub": 0x000eb2,
  "Hangul_SsangPieub": 0x000eb3,
  "Hangul_PieubSios": 0x000eb4,
  "Hangul_Sios": 0x000eb5,
  "Hangul_SsangSios": 0x000eb6,
  "Hangul_Ieung": 0x000eb7,
  "Hangul_Jieuj": 0x000eb8,
  "Hangul_SsangJieuj": 0x000eb9,
  "Hangul_Cieuc": 0x000eba,
  "Hangul_Khieuq": 0x000ebb,
  "Hangul_Tieut": 0x000ebc,
  "Hangul_Phieuf": 0x000ebd,
  "Hangul_Hieuh": 0x000ebe,
  "Hangul_A": 0x000ebf,
  "Hangul_AE": 0x000ec0,
  "Hangul_YA": 0x000ec1,
  "Hangul_YAE": 0x000ec2,
  "Hangul_EO": 0x000ec3,
  "Hangul_E": 0x000ec4,
  "Hangul_YEO": 0x000ec5,
  "Hangul_YE": 0x000ec6,
  "Hangul_O": 0x000ec7,
  "Hangul_WA": 0x000ec8,
  "Hangul_WAE": 0x000ec9,
  "Hangul_OE": 0x000eca,
  "Hangul_YO": 0x000ecb,
  "Hangul_U": 0x000ecc,
  "Hangul_WEO": 0x000ecd,
  "Hangul_WE": 0x000ece,
  "Hangul_WI": 0x000ecf,
  "Hangul_YU": 0x000ed0,
  "Hangul_EU": 0x000ed1,
  "Hangul_YI": 0x000ed2,
  "Hangul_I": 0x000ed3,
  "Hangul_J_Kiyeog": 0x000ed4,
  "Hangul_J_SsangKiyeog": 0x000ed5,
  "Hangul_J_KiyeogSios": 0x000ed6,
  "Hangul_J_Nieun": 0x000ed7,
  "Hangul_J_NieunJieuj": 0x000ed8,
  "Hangul_J_NieunHieuh": 0x000ed9,
  "Hangul_J_Dikeud": 0x000eda,
  "Hangul_J_Rieul": 0x000edb,
  "Hangul_J_RieulKiyeog": 0x000edc,
  "Hangul_J_RieulMieum": 0x000edd,
  "Hangul_J_RieulPieub": 0x000ede,
  "Hangul_J_RieulSios": 0x000edf,
  "Hangul_J_RieulTieut": 0x000ee0,
  "Hangul_J_RieulPhieuf": 0x000ee1,
  "Hangul_J_RieulHieuh": 0x000ee2,
  "Hangul_J_Mieum": 0x000ee3,
  "Hangul_J_Pieub": 0x000ee4,
  "Hangul_J_PieubSios": 0x000ee5,
  "Hangul_J_Sios": 0x000ee6,
  "Hangul_J_SsangSios": 0x000ee7,
  "Hangul_J_Ieung": 0x000ee8,
  "Hangul_J_Jieuj": 0x000ee9,
  "Hangul_J_Cieuc": 0x000eea,
  "Hangul_J_Khieuq": 0x000eeb,
  "Hangul_J_Tieut": 0x000eec,
  "Hangul_J_Phieuf": 0x000eed,
  "Hangul_J_Hieuh": 0x000eee,
  "Hangul_RieulYeorinHieuh": 0x000eef,
  "Hangul_SunkyeongeumMieum": 0x000ef0,
  "Hangul_SunkyeongeumPieub": 0x000ef1,
  "Hangul_PanSios": 0x000ef2,
  "Hangul_KkogjiDalrinIeung": 0x000ef3,
  "Hangul_SunkyeongeumPhieuf": 0x000ef4,
  "Hangul_YeorinHieuh": 0x000ef5,
  "Hangul_AraeA": 0x000ef6,
  "Hangul_AraeAE": 0x000ef7,
  "Hangul_J_PanSios": 0x000ef8,
  "Hangul_J_KkogjiDalrinIeung": 0x000ef9,
  "Hangul_J_YeorinHieuh": 0x000efa,
  "Korean_Won": 0x000eff,
  "OE": 0x0013bc,
  "oe": 0x0013bd,
  "Ydiaeresis": 0x0013be,
  "EcuSign": 0x0020a0,
  "ColonSign": 0x0020a1,
  "CruzeiroSign": 0x0020a2,
  "FFrancSign": 0x0020a3,
  "LiraSign": 0x0020a4,
  "MillSign": 0x0020a5,
  "NairaSign": 0x0020a6,
  "PesetaSign": 0x0020a7,
  "RupeeSign": 0x0020a8,
  "WonSign": 0x0020a9,
  "NewSheqelSign": 0x0020aa,
  "DongSign": 0x0020ab,
  "EuroSign": 0x0020ac,
  "3270_Duplicate": 0x00fd01,
  "3270_FieldMark": 0x00fd02,
  "3270_Right2": 0x00fd03,
  "3270_Left2": 0x00fd04,
  "3270_BackTab": 0x00fd05,
  "3270_EraseEOF": 0x00fd06,
  "3270_EraseInput": 0x00fd07,
  "3270_Reset": 0x00fd08,
  "3270_Quit": 0x00fd09,
  "3270_PA1": 0x00fd0a,
  "3270_PA2": 0x00fd0b,
  "3270_PA3": 0x00fd0c,
  "3270_Test": 0x00fd0d,
  "3270_Attn": 0x00fd0e,
  "3270_CursorBlink": 0x00fd0f,
  "3270_AltCursor": 0x00fd10,
  "3270_KeyClick": 0x00fd11,
  "3270_Jump": 0x00fd12,
  "3270_Ident": 0x00fd13,
  "3270_Rule": 0x00fd14,
  "3270_Copy": 0x00fd15,
  "3270_Play": 0x00fd16,
  "3270_Setup": 0x00fd17,
  "3270_Record": 0x00fd18,
  "3270_ChangeScreen": 0x00fd19,
  "3270_DeleteWord": 0x00fd1a,
  "3270_ExSelect": 0x00fd1b,
  "3270_CursorSelect": 0x00fd1c,
  "3270_PrintScreen": 0x00fd1d,
  "3270_Enter": 0x00fd1e,
  "ISO_Lock": 0x00fe01,
  "ISO_Level2_Latch": 0x00fe02,
  "ISO_Level3_Shift": 0x00fe03,
  "ISO_Level3_Latch": 0x00fe04,
  "ISO_Level3_Lock": 0x00fe05,
  "ISO_Group_Latch": 0x00fe06,
  "ISO_Group_Lock": 0x00fe07,
  "ISO_Next_Group": 0x00fe08,
  "ISO_Next_Group_Lock": 0x00fe09,
  "ISO_Prev_Group": 0x00fe0a,
  "ISO_Prev_Group_Lock": 0x00fe0b,
  "ISO_First_Group": 0x00fe0c,
  "ISO_First_Group_Lock": 0x00fe0d,
  "ISO_Last_Group": 0x00fe0e,
  "ISO_Last_Group_Lock": 0x00fe0f,
  "ISO_Left_Tab": 0x00fe20,
  "ISO_Move_Line_Up": 0x00fe21,
  "ISO_Move_Line_Down": 0x00fe22,
  "ISO_Partial_Line_Up": 0x00fe23,
  "ISO_Partial_Line_Down": 0x00fe24,
  "ISO_Partial_Space_Left": 0x00fe25,
  "ISO_Partial_Space_Right": 0x00fe26,
  "ISO_Set_Margin_Left": 0x00fe27,
  "ISO_Set_Margin_Right": 0x00fe28,
  "ISO_Release_Margin_Left": 0x00fe29,
  "ISO_Release_Margin_Right": 0x00fe2a,
  "ISO_Release_Both_Margins": 0x00fe2b,
  "ISO_Fast_Cursor_Left": 0x00fe2c,
  "ISO_Fast_Cursor_Right": 0x00fe2d,
  "ISO_Fast_Cursor_Up": 0x00fe2e,
  "ISO_Fast_Cursor_Down": 0x00fe2f,
  "ISO_Continuous_Underline": 0x00fe30,
  "ISO_Discontinuous_Underline": 0x00fe31,
  "ISO_Emphasize": 0x00fe32,
  "ISO_Center_Object": 0x00fe33,
  "ISO_Enter": 0x00fe34,
  "dead_grave": 0x00fe50,
  "dead_acute": 0x00fe51,
  "dead_circumflex": 0x00fe52,
  "dead_tilde": 0x00fe53,
  "dead_macron": 0x00fe54,
  "dead_breve": 0x00fe55,
  "dead_abovedot": 0x00fe56,
  "dead_diaeresis": 0x00fe57,
  "dead_abovering": 0x00fe58,
  "dead_doubleacute": 0x00fe59,
  "dead_caron": 0x00fe5a,
  "dead_cedilla": 0x00fe5b,
  "dead_ogonek": 0x00fe5c,
  "dead_iota": 0x00fe5d,
  "dead_voiced_sound": 0x00fe5e,
  "dead_semivoiced_sound": 0x00fe5f,
  "dead_belowdot": 0x00fe60,
  "dead_hook": 0x00fe61,
  "dead_horn": 0x00fe62,
  "AccessX_Enable": 0x00fe70,
  "AccessX_Feedback_Enable": 0x00fe71,
  "RepeatKeys_Enable": 0x00fe72,
  "SlowKeys_Enable": 0x00fe73,
  "BounceKeys_Enable": 0x00fe74,
  "StickyKeys_Enable": 0x00fe75,
  "MouseKeys_Enable": 0x00fe76,
  "MouseKeys_Accel_Enable": 0x00fe77,
  "Overlay1_Enable": 0x00fe78,
  "Overlay2_Enable": 0x00fe79,
  "AudibleBell_Enable": 0x00fe7a,
  "First_Virtual_Screen": 0x00fed0,
  "Prev_Virtual_Screen": 0x00fed1,
  "Next_Virtual_Screen": 0x00fed2,
  "Last_Virtual_Screen": 0x00fed4,
  "Terminate_Server": 0x00fed5,
  "Pointer_Left": 0x00fee0,
  "Pointer_Right": 0x00fee1,
  "Pointer_Up": 0x00fee2,
  "Pointer_Down": 0x00fee3,
  "Pointer_UpLeft": 0x00fee4,
  "Pointer_UpRight": 0x00fee5,
  "Pointer_DownLeft": 0x00fee6,
  "Pointer_DownRight": 0x00fee7,
  "Pointer_Button_Dflt": 0x00fee8,
  "Pointer_Button1": 0x00fee9,
  "Pointer_Button2": 0x00feea,
  "Pointer_Button3": 0x00feeb,
  "Pointer_Button4": 0x00feec,
  "Pointer_Button5": 0x00feed,
  "Pointer_DblClick_Dflt": 0x00feee,
  "Pointer_DblClick1": 0x00feef,
  "Pointer_DblClick2": 0x00fef0,
  "Pointer_DblClick3": 0x00fef1,
  "Pointer_DblClick4": 0x00fef2,
  "Pointer_DblClick5": 0x00fef3,
  "Pointer_Drag_Dflt": 0x00fef4,
  "Pointer_Drag1": 0x00fef5,
  "Pointer_Drag2": 0x00fef6,
  "Pointer_Drag3": 0x00fef7,
  "Pointer_Drag4": 0x00fef8,
  "Pointer_EnableKeys": 0x00fef9,
  "Pointer_Accelerate": 0x00fefa,
  "Pointer_DfltBtnNext": 0x00fefb,
  "Pointer_DfltBtnPrev": 0x00fefc,
  "Pointer_Drag5": 0x00fefd,
  "BackSpace": 0x00ff08,
  "Tab": 0x00ff09,
  "Linefeed": 0x00ff0a,
  "Clear": 0x00ff0b,
  "Return": 0x00ff0d,
  "Pause": 0x00ff13,
  "Scroll_Lock": 0x00ff14,
  "Sys_Req": 0x00ff15,
  "Escape": 0x00ff1b,
  "Multi_key": 0x00ff20,
  "Kanji": 0x00ff21,
  "Muhenkan": 0x00ff22,
  "Henkan": 0x00ff23,
  "Henkan_Mode": 0x00ff23,
  "Romaji": 0x00ff24,
  "Hiragana": 0x00ff25,
  "Katakana": 0x00ff26,
  "Hiragana_Katakana": 0x00ff27,
  "Zenkaku": 0x00ff28,
  "Hankaku": 0x00ff29,
  "Zenkaku_Hankaku": 0x00ff2a,
  "Touroku": 0x00ff2b,
  "Massyo": 0x00ff2c,
  "Kana_Lock": 0x00ff2d,
  "Kana_Shift": 0x00ff2e,
  "Eisu_Shift": 0x00ff2f,
  "Eisu_toggle": 0x00ff30,
  "Hangul": 0x00ff31,
  "Hangul_Start": 0x00ff32,
  "Hangul_End": 0x00ff33,
  "Hangul_Hanja": 0x00ff34,
  "Hangul_Jamo": 0x00ff35,
  "Hangul_Romaja": 0x00ff36,
  "Codeinput": 0x00ff37,
  "Hangul_Jeonja": 0x00ff38,
  "Hangul_Banja": 0x00ff39,
  "Hangul_PreHanja": 0x00ff3a,
  "Hangul_PostHanja": 0x00ff3b,
  "SingleCandidate": 0x00ff3c,
  "MultipleCandidate": 0x00ff3d,
  "PreviousCandidate": 0x00ff3e,
  "Hangul_Special": 0x00ff3f,
  "Home": 0x00ff50,
  "Left": 0x00ff51,
  "Up": 0x00ff52,
  "Right": 0x00ff53,
  "Down": 0x00ff54,
  "Page_Up": 0x00ff55,
  "Prior": 0x00ff55,
  "Page_Down": 0x00ff56,
  "Next": 0x00ff56,
  "End": 0x00ff57,
  "Begin": 0x00ff58,
  "Select": 0x00ff60,
  "Print": 0x00ff61,
  "Execute": 0x00ff62,
  "Insert": 0x00ff63,
  "Undo": 0x00ff65,
  "Redo": 0x00ff66,
  "Menu": 0x00ff67,
  "Find": 0x00ff68,
  "Cancel": 0x00ff69,
  "Help": 0x00ff6a,
  "Break": 0x00ff6b,
  "Arabic_switch": 0x00ff7e,
  "Greek_switch": 0x00ff7e,
  "Hangul_switch": 0x00ff7e,
  "Hebrew_switch": 0x00ff7e,
  "ISO_Group_Shift": 0x00ff7e,
  "Mode_switch": 0x00ff7e,
  "kana_switch": 0x00ff7e,
  "script_switch": 0x00ff7e,
  "Num_Lock": 0x00ff7f,
  "KP_Space": 0x00ff80,
  "KP_Tab": 0x00ff89,
  "KP_Enter": 0x00ff8d,
  "KP_F1": 0x00ff91,
  "KP_F2": 0x00ff92,
  "KP_F3": 0x00ff93,
  "KP_F4": 0x00ff94,
  "KP_Home": 0x00ff95,
  "KP_Left": 0x00ff96,
  "KP_Up": 0x00ff97,
  "KP_Right": 0x00ff98,
  "KP_Down": 0x00ff99,
  "KP_Page_Up": 0x00ff9a,
  "KP_Prior": 0x00ff9a,
  "KP_Page_Down": 0x00ff9b,
  "KP_Next": 0x00ff9b,
  "KP_End": 0x00ff9c,
  "KP_Begin": 0x00ff9d,
  "KP_Insert": 0x00ff9e,
  "KP_Delete": 0x00ff9f,
  "KP_Multiply": 0x00ffaa,
  "KP_Add": 0x00ffab,
  "KP_Separator": 0x00ffac,
  "KP_Subtract": 0x00ffad,
  "KP_Decimal": 0x00ffae,
  "KP_Divide": 0x00ffaf,
  "KP_0": 0x00ffb0,
  "KP_1": 0x00ffb1,
  "KP_2": 0x00ffb2,
  "KP_3": 0x00ffb3,
  "KP_4": 0x00ffb4,
  "KP_5": 0x00ffb5,
  "KP_6": 0x00ffb6,
  "KP_7": 0x00ffb7,
  "KP_8": 0x00ffb8,
  "KP_9": 0x00ffb9,
  "KP_Equal": 0x00ffbd,
  "F1": 0x00ffbe,
  "F2": 0x00ffbf,
  "F3": 0x00ffc0,
  "F4": 0x00ffc1,
  "F5": 0x00ffc2,
  "F6": 0x00ffc3,
  "F7": 0x00ffc4,
  "F8": 0x00ffc5,
  "F9": 0x00ffc6,
  "F10": 0x00ffc7,
  "F11": 0x00ffc8,
  "F12": 0x00ffc9,
  "F13": 0x00ffca,
  "F14": 0x00ffcb,
  "F15": 0x00ffcc,
  "F16": 0x00ffcd,
  "F17": 0x00ffce,
  "F18": 0x00ffcf,
  "F19": 0x00ffd0,
  "F20": 0x00ffd1,
  "F21": 0x00ffd2,
  "F22": 0x00ffd3,
  "F23": 0x00ffd4,
  "F24": 0x00ffd5,
  "F25": 0x00ffd6,
  "F26": 0x00ffd7,
  "F27": 0x00ffd8,
  "F28": 0x00ffd9,
  "F29": 0x00ffda,
  "F30": 0x00ffdb,
  "F31": 0x00ffdc,
  "F32": 0x00ffdd,
  "F33": 0x00ffde,
  "F34": 0x00ffdf,
  "F35": 0x00ffe0,
  "Shift_L": 0x00ffe1,
  "Shift_R": 0x00ffe2,
  "Control_L": 0x00ffe3,
  "Control_R": 0x00ffe4,
  "Caps_Lock": 0x00ffe5,
  "Shift_Lock": 0x00ffe6,
  "Meta_L": 0x00ffe7,
  "Meta_R": 0x00ffe8,
  "Alt_L": 0x00ffe9,
  "Alt_R": 0x00ffea,
  "Super_L": 0x00ffeb,
  "Super_R": 0x00ffec,
  "Hyper_L": 0x00ffed,
  "Hyper_R": 0x00ffee,
  "Delete": 0x00ffff,
]

fileprivate let keychar_rime_to_mac: [CInt: Int] = [
  // ASCII control characters
  XK_KP_Enter: NSEnterCharacter,
  XK_BackSpace: NSBackspaceCharacter,
  XK_Tab: NSTabCharacter,
  XK_Linefeed: NSNewlineCharacter,
  XK_Return: NSCarriageReturnCharacter,
  XK_ISO_Left_Tab: NSBackTabCharacter,
  XK_Delete: NSDeleteCharacter,
  // Nagivator key characters
  XK_Up: NSUpArrowFunctionKey,
  XK_Down: NSDownArrowFunctionKey,
  XK_Left: NSLeftArrowFunctionKey,
  XK_Right: NSRightArrowFunctionKey,
  // Function key characters
  XK_F1: NSF1FunctionKey,
  XK_F2: NSF2FunctionKey,
  XK_F3: NSF3FunctionKey,
  XK_F4: NSF4FunctionKey,
  XK_F5: NSF5FunctionKey,
  XK_F6: NSF6FunctionKey,
  XK_F7: NSF7FunctionKey,
  XK_F8: NSF8FunctionKey,
  XK_F9: NSF9FunctionKey,
  XK_F10: NSF10FunctionKey,
  XK_F11: NSF11FunctionKey,
  XK_F12: NSF12FunctionKey,
  XK_F13: NSF13FunctionKey,
  XK_F14: NSF14FunctionKey,
  XK_F15: NSF15FunctionKey,
  XK_F16: NSF16FunctionKey,
  XK_F17: NSF17FunctionKey,
  XK_F18: NSF18FunctionKey,
  XK_F19: NSF19FunctionKey,
  XK_F20: NSF20FunctionKey,
  XK_F21: NSF21FunctionKey,
  XK_F22: NSF22FunctionKey,
  XK_F23: NSF23FunctionKey,
  XK_F24: NSF24FunctionKey,
  XK_F25: NSF25FunctionKey,
  XK_F26: NSF26FunctionKey,
  XK_F27: NSF27FunctionKey,
  XK_F28: NSF28FunctionKey,
  XK_F29: NSF29FunctionKey,
  XK_F30: NSF30FunctionKey,
  XK_F31: NSF31FunctionKey,
  XK_F32: NSF32FunctionKey,
  XK_F33: NSF33FunctionKey,
  XK_F34: NSF34FunctionKey,
  XK_F35: NSF35FunctionKey,
  // Misc functional key characters
  XK_Insert: NSInsertFunctionKey,
  XK_Home: NSHomeFunctionKey,
  XK_Begin: NSBeginFunctionKey,
  XK_End: NSEndFunctionKey,
  XK_Page_Up: NSPageUpFunctionKey,
  XK_Page_Down: NSPageDownFunctionKey,
  XK_Scroll_Lock: NSScrollLockFunctionKey,
  XK_Pause: NSPauseFunctionKey,
  XK_Sys_Req: NSSysReqFunctionKey,
  XK_Break: NSBreakFunctionKey,
  XK_Cancel: NSStopFunctionKey,
  XK_Menu: NSMenuFunctionKey,
  XK_Print: NSPrintFunctionKey,
  XK_Clear: NSClearLineFunctionKey,
  XK_Num_Lock: NSClearDisplayFunctionKey,
  XK_Select: NSSelectFunctionKey,
  XK_Execute: NSExecuteFunctionKey,
  XK_Undo: NSUndoFunctionKey,
  XK_Redo: NSRedoFunctionKey,
  XK_Find: NSFindFunctionKey,
  XK_Help: NSHelpFunctionKey,
  XK_Mode_switch: NSModeSwitchFunctionKey
]
